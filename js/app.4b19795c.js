(function(e){function t(t){for(var o,a,u=t[0],l=t[1],i=t[2],f=0,s=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&s.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(s.length)s.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,u=1;u<n.length;u++){var l=n[u];0!==r[l]&&(o=!1)}o&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},c=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var d=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},5033:function(e){e.exports=JSON.parse('{"container":{"width":550,"height":550},"blocks":[]}')},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r=(n("d9b6"),{class:"app"});function c(e,t,n,c,a,u){var l=Object(o["resolveComponent"])("Editor");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(l,{modelValue:c.state,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.state=e}),formData:c.formData},null,8,["modelValue","formData"])])}var a=n("5033"),u=(n("d81d"),n("a818"),n("b64b"),Object(o["defineComponent"])({props:{block:{type:Object},component:{type:Object}},setup:function(e){var t=e.component.resize||{},n=t.width,r=t.height,c={},a=function(t){var n=t.clientX,o=t.clientY,r=c,a=r.startX,u=r.startY,l=r.startWidth,i=r.startHeight,d=r.startLeft,f=r.startTop,s=r.direction;"center"==s.horizontal&&(n=a),"center"==s.vertical&&(o=u);var b=n-a,p=o-u;"start"==s.vertical&&(p=-p,e.block.top=f-p),"start"==s.horizontal&&(b=-b,e.block.left=d-b);var v=l+b,m=i+p;e.block.width=v,e.block.height=m,e.block.hasResize=!0},u=function e(){console.log("mouseup"),document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",e)},l=function(t,n){t.stopPropagation(),c={startX:t.clientX,startY:t.clientY,startWidth:e.block.width,startHeight:e.block.height,startLeft:e.block.left,startTop:e.block.top,direction:n},document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",u)};return function(){return Object(o["createVNode"])(o["Fragment"],null,[n&&Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:"block-resize block-resize-left",onMousedown:function(e){return l(e,{horizontal:"start",vertical:"center"})}},null),Object(o["createVNode"])("div",{class:"block-resize block-resize-right",onMousedown:function(e){return l(e,{horizontal:"end",vertical:"center"})}},null)]),r&&Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:"block-resize block-resize-top",onMousedown:function(e){return l(e,{horizontal:"center",vertical:"start"})}},null),Object(o["createVNode"])("div",{class:"block-resize block-resize-bottom",onMousedown:function(e){return l(e,{horizontal:"center",vertical:"end"})}},null)]),n&&r&&Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:"block-resize block-resize-top-left",onMousedown:function(e){return l(e,{horizontal:"start",vertical:"start"})}},null),Object(o["createVNode"])("div",{class:"block-resize block-resize-top-right",onMousedown:function(e){return l(e,{horizontal:"end",vertical:"start"})}},null),Object(o["createVNode"])("div",{class:"block-resize block-resize-bottom-left",onMousedown:function(e){return l(e,{horizontal:"start",vertical:"end"})}},null),Object(o["createVNode"])("div",{class:"block-resize block-resize-bottom-right",onMousedown:function(e){return l(e,{horizontal:"end",vertical:"end"})}},null)])])}}})),l=Object(o["defineComponent"])({props:{block:{type:Object},formData:{type:Object}},setup:function(e){var t=Object(o["computed"])((function(){return{top:"".concat(e.block.top,"px"),left:"".concat(e.block.left,"px"),zIndex:"".concat(e.block.zIndex)}})),n=Object(o["inject"])("config"),r=Object(o["ref"])(null);return Object(o["onMounted"])((function(){var t=r.value,n=t.offsetWidth,o=t.offsetHeight;e.block.alignCenter&&(e.block.left=e.block.left-n/2,e.block.top=e.block.top-o/2,e.block.alignCenter=!1),e.block.width=n,e.block.height=o})),function(){var c=n.componentMap[e.block.key],a=c.render({size:e.block.hasResize?{width:e.block.width,height:e.block.height}:{},props:e.block.props,model:Object.keys(c.model||{}).reduce((function(t,n){var o=e.block.model[n];return t[n]={modelValue:e.formData[o],"onUpdate:modelValue":function(t){return e.formData[o]=t}},t}),{})}),l=c.resize||{},i=l.width,d=l.height;return Object(o["createVNode"])("div",{class:"editor-block",style:t.value,ref:r},[a,e.block.focus&&(i||d)&&Object(o["createVNode"])(u,{block:e.block,component:c},null)])}}}),i=n("4979"),d=n.n(i),f=n("2909"),s=n("5530"),b=(n("99af"),n("1344")),p=Object(b["a"])();function v(e,t){var n=null,o=function(e){e.dataTransfer.dropEffect="move"},r=function(e){e.preventDefault()},c=function(e){e.dataTransfer.dropEffect="none"},a=function(e){var o=t.value.blocks;t.value=Object(s["a"])(Object(s["a"])({},t.value),{},{blocks:[].concat(Object(f["a"])(o),[{top:e.offsetY,left:e.offsetX,zIndex:1,key:n.key,alignCenter:!0,props:{},model:{}}])}),n=null},u=function(t,u){e.value.addEventListener("dragenter",o),e.value.addEventListener("dragover",r),e.value.addEventListener("dragleave",c),e.value.addEventListener("drop",a),n=u,p.emit("start")},l=function(t){e.value.removeEventListener("dragenter",o),e.value.removeEventListener("dragover",r),e.value.removeEventListener("dragleave",c),e.value.removeEventListener("drop",a),p.emit("end")};return{dragstart:u,dragend:l}}n("159b");function m(e,t,n){var r=Object(o["ref"])(-1),c=Object(o["computed"])((function(){return e.value.blocks[r.value]})),a=Object(o["computed"])((function(){var t=[],n=[];return e.value.blocks.forEach((function(e){return(e.focus?t:n).push(e)})),{focus:t,unfocused:n}})),u=function(){e.value.blocks.forEach((function(e){return e.focus=!1}))},l=function(){t.value||(u(),r.value=-1)},i=function(e,o,c){t.value||(e.preventDefault(),e.stopPropagation(),e.shiftKey?a.value.focus.length<=1?o.focus=!0:o.focus=!o.focus:o.focus||(u(),o.focus=!0),r.value=c,n(e))};return{blockMousedown:i,containerMousedown:l,focusData:a,lastSelectBlock:c,clearBlockFocus:u}}function j(e,t,n){var r={startX:0,startY:0,dragging:!1},c=Object(o["reactive"])({x:null,y:null}),a=function(o){var c=t.value,a=c.width,i=c.height;r={startX:o.clientX,startY:o.clientY,startLeft:t.value.left,startTop:t.value.top,dragging:!1,startPos:e.value.focus.map((function(e){var t=e.top,n=e.left;return{top:t,left:n}})),lines:function(){var t=e.value.unfocused,o={x:[],y:[]};return[].concat(Object(f["a"])(t),[{top:0,left:0,width:n.value.container.width,height:n.value.container.height}]).forEach((function(e){var t=e.top,n=e.left,r=e.width,c=e.height;o.y.push({showTop:t,top:t}),o.y.push({showTop:t,top:t-i}),o.y.push({showTop:t+c/2,top:t+c/2-i/2}),o.y.push({showTop:t+c,top:t+c}),o.y.push({showTop:t+c,top:t+c-i}),o.x.push({showLeft:n,left:n}),o.x.push({showLeft:n+r,left:n+r}),o.x.push({showLeft:n+r/2,left:n+r/2-a/2}),o.x.push({showLeft:n+r,left:n+r-a}),o.x.push({showLeft:n,left:n-a})})),o}()},document.addEventListener("mousemove",u),document.addEventListener("mouseup",l)},u=function(t){var n=t.clientX,o=t.clientY;r.dragging||(r.dragging=!0,p.emit("start"));for(var a=n-r.startX+r.startLeft,u=o-r.startY+r.startTop,l=null,i=null,d=0;d<r.lines.y.length;d++){var f=r.lines.y[d],s=f.top,b=f.showTop;if(Math.abs(s-u)<5){l=b,o=r.startY-r.startTop+s;break}}for(var v=0;v<r.lines.x.length;v++){var m=r.lines.x[v],j=m.left,O=m.showLeft;if(Math.abs(j-a)<5){i=O,n=r.startX-r.startLeft+j;break}}c.x=i,c.y=l;var h=n-r.startX,V=o-r.startY;e.value.focus.forEach((function(e,t){e.top=r.startPos[t].top+V,e.left=r.startPos[t].left+h}))},l=function e(t){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e),c.x=null,c.y=null,r.dragging&&p.emit("end")};return{mousedown:a,markLine:c}}n("b0c0"),n("fb6a"),n("a434"),n("a15b");function O(e,t){var n={current:-1,queue:[],commands:{},commandArray:[],destroyArray:[]},r=function(e){n.commandArray.push(e),n.commands[e.name]=function(){var t=e.execute.apply(e,arguments),o=t.redo,r=t.undo;if(o(),e.pushQueue){var c=n.queue,a=n.current;c.length>0&&(c=c.slice(0,a+1),n.queue=c),c.push({redo:o,undo:r}),n.current=a+1,console.log(c)}}};r({name:"redo",keyboard:"ctrl+y",execute:function(){return{redo:function(){var e=n.queue[n.current+1];e&&(e.redo&&e.redo(),n.current++)}}}}),r({name:"undo",keyboard:"ctrl+z",execute:function(){return{redo:function(){if(-1!=n.current){var e=n.queue[n.current];e&&(e.undo&&e.undo(),n.current--)}}}}}),r({name:"drag",pushQueue:!0,init:function(){var t=this;this.before=null;var o=function(){t.before=d()(e.value.blocks)},r=function(){n.commands.drag()};return p.on("start",o),p.on("end",r),function(){p.off("start",o),p.off("end",r)}},execute:function(){var t=this.before,n=e.value.blocks;return{redo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:n})},undo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:t})}}}}),r({name:"updateContainer",pushQueue:!0,execute:function(t){var n={before:e.value,after:t};return{redo:function(){e.value=n.after},undo:function(){e.value=n.before}}}}),r({name:"updateBlock",pushQueue:!0,execute:function(t,n){var o={before:e.value.blocks,after:function(){var o=Object(f["a"])(e.value.blocks),r=e.value.blocks.indexOf(n);return r>-1&&o.splice(r,1,t),o}()};return{redo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:o.after})},undo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:o.before})}}}}),r({name:"placeTop",pushQueue:!0,execute:function(){var n=d()(e.value.blocks),o=function(){var n=t.value,o=n.focus,r=n.unfocused,c=r.reduce((function(e,t){return Math.max(e,t.zIndex)}),-1/0);return o.forEach((function(e){return e.zIndex=c+1})),e.value.blocks}();return{undo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:n})},redo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:o})}}}}),r({name:"placeBottom",pushQueue:!0,execute:function(){var n=d()(e.value.blocks),o=function(){var n=t.value,o=n.focus,r=n.unfocused,c=r.reduce((function(e,t){return Math.min(e,t.zIndex)}),1/0)-1;if(c<0){var a=Math.abs(c);c=0,r.forEach((function(e){return e.zIndex+=a}))}return o.forEach((function(e){return e.zIndex=c})),e.value.blocks}();return{undo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:n})},redo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:o})}}}}),r({name:"delete",keyboard:"delete",pushQueue:!0,execute:function(){var n={before:d()(e.value.blocks),after:t.value.unfocused};return{redo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:n.after})},undo:function(){e.value=Object(s["a"])(Object(s["a"])({},e.value),{},{blocks:n.before})}}}});var c=function(){var e={90:"z",89:"y",46:"delete"},t=function(t){var o=t.ctrlKey,r=t.keyCode,c=[];o&&c.push("ctrl"),c.push(e[r]),c=c.join("+"),n.commandArray.forEach((function(e){var o=e.keyboard,r=e.name;o&&o===c&&(n.commands[r](),t.preventDefault())}))},o=function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}};return o}();return function(){n.destroyArray.push(c()),n.commandArray.forEach((function(e){return e.init&&n.destroyArray.push(e.init())}))}(),Object(o["onUnmounted"])((function(){n.destroyArray.forEach((function(e){return e&&e()}))})),n}var h,V=n("db9d"),k=n("c349"),y=n("cf2e"),g=Object(o["defineComponent"])({props:{option:{type:Object}},setup:function(e,t){var n=Object(o["reactive"])({option:e.option,isShow:!1});t.expose({showDialog:function(e){n.option=e,n.isShow=!0}});var r=function(){n.isShow=!1},c=function(){n.isShow=!1,n.option.onConfirm&&n.option.onConfirm(n.option.content)};return function(){return Object(o["createVNode"])(V["a"],{modelValue:n.isShow,"onUpdate:modelValue":function(e){return n.isShow=e},title:n.option.title},{default:function(){return Object(o["createVNode"])(k["a"],{type:"textarea",modelValue:n.option.content,"onUpdate:modelValue":function(e){return n.option.content=e},rows:10},null)},footer:function(){return n.option.footer&&Object(o["createVNode"])("div",null,[Object(o["createVNode"])(y["a"],{onClick:r},{default:function(){return[Object(o["createTextVNode"])("取消")]}}),Object(o["createVNode"])(y["a"],{type:"primary",onClick:c},{default:function(){return[Object(o["createTextVNode"])("确定")]}})])}})}}});function N(e){if(!h){var t=document.createElement("div");h=Object(o["createVNode"])(g,{option:e}),document.body.appendChild((Object(o["render"])(h,t),t))}var n=h.component.exposed.showDialog;n(e)}var w,x=Object(o["defineComponent"])({props:{label:String,icon:String},setup:function(e){var t=e.label,n=e.icon,r=Object(o["inject"])("hide");return function(){return Object(o["createVNode"])("div",{class:"dropdown-item",onClick:r},[Object(o["createVNode"])("i",{class:n},null),Object(o["createVNode"])("span",null,[t])])}}}),C=Object(o["defineComponent"])({props:{option:{type:Object}},setup:function(e,t){var n=Object(o["reactive"])({option:e.option,isShow:!1,top:0,left:0});t.expose({showDropdown:function(e){n.option=e,n.isShow=!0;var t=e.el.getBoundingClientRect(),o=t.top,r=t.left,c=t.height;n.top=o+c,n.left=r}}),Object(o["provide"])("hide",(function(){return n.isShow=!1}));var r=Object(o["computed"])((function(){return["dropdown",{"dropdown-isShow":n.isShow}]})),c=Object(o["computed"])((function(){return{top:n.top+"px",left:n.left+"px"}})),a=Object(o["ref"])(null),u=function(e){a.value.contains(e.target)||(n.isShow=!1)};return Object(o["onMounted"])((function(){document.body.addEventListener("mousedown",u,!0)})),Object(o["onBeforeUnmount"])((function(){document.body.removeEventListener("mousedown",u)})),function(){return Object(o["createVNode"])("div",{class:r.value,style:c.value,ref:a},[n.option.content()])}}});function z(e){if(!w){var t=document.createElement("div");w=Object(o["createVNode"])(C,{option:e}),document.body.appendChild((Object(o["render"])(w,t),t))}var n=w.component.exposed.showDropdown;n(e)}var D,E=n("3835"),L=(n("4fad"),n("d3b7"),n("d8e8")),S=n("9082"),T=n("cf53"),M=n("91c0"),U=n("ae7b"),B=n("1e49"),P=Object(o["defineComponent"])({props:{option:{type:Object}},setup:function(e,t){var n=Object(o["reactive"])({option:e.option,isShow:!1,editData:[]}),r={show:function(e){n.option=e,n.isShow=!0,n.editData=d()(e.data)}},c=function(){n.editData.push({})},a=function(){n.isShow=!1},u=function(){n.option.onConfirm(n.editData),a()};return t.expose(r),function(){return Object(o["createVNode"])(V["a"],{modelValue:n.isShow,"onUpdate:modelValue":function(e){return n.isShow=e},title:n.option.config.label},{default:function(){return Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",null,[Object(o["createVNode"])(y["a"],{onClick:c},{default:function(){return[Object(o["createTextVNode"])("添加")]}}),Object(o["createVNode"])(y["a"],null,{default:function(){return[Object(o["createTextVNode"])("重置")]}})]),Object(o["createVNode"])(B["a"],{data:n.editData},{default:function(){return[Object(o["createVNode"])(B["b"],{type:"index"},null),n.option.config.table.options.map((function(e,t){return Object(o["createVNode"])(B["b"],{label:e.label},{default:function(t){var n=t.row;return Object(o["createVNode"])(k["a"],{modelValue:n[e.field],"onUpdate:modelValue":function(t){return n[e.field]=t}},null)}})})),Object(o["createVNode"])(B["b"],{label:"操作"},{default:function(){return[Object(o["createVNode"])(y["a"],{type:"danger"},{default:function(){return[Object(o["createTextVNode"])("删除")]}})]}})]}})])},footer:function(){return Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])(y["a"],{onClick:a},{default:function(){return[Object(o["createTextVNode"])("取消")]}}),Object(o["createVNode"])(y["a"],{onClick:u},{default:function(){return[Object(o["createTextVNode"])("确定")]}})])}})}}}),F=function(e){if(!D){var t=document.createElement("div");D=Object(o["createVNode"])(P,{option:e});Object(o["render"])(D,t);document.body.appendChild(t)}var n=D.component.exposed.show;n(e)},X=Object(o["defineComponent"])({props:{propConfig:{type:Object},modelValue:{type:Array}},emits:["update:modelValue"],setup:function(e,t){var n=Object(o["computed"])({get:function(){return e.modelValue||[]},set:function(e){t.emit("update:modelValue",d()(e))}}),r=function(){F({config:e.propConfig,data:n.value,onConfirm:function(e){n.value=e}})};return function(){return Object(o["createVNode"])("div",null,[(!n.value||0==n.value.length)&&Object(o["createVNode"])(y["a"],{onClick:r},{default:function(){return[Object(o["createTextVNode"])("添加")]}}),(n.value||[]).map((function(t){return Object(o["createVNode"])(U["a"],{onClick:r},{default:function(){return[t[e.propConfig.table.key]]}})}))])}}});function Y(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(o["isVNode"])(e)}var A=Object(o["defineComponent"])({props:{block:{type:Object},data:{type:Object},updateContainer:{type:Function},updateBlock:{type:Function}},setup:function(e,t){var n=Object(o["inject"])("config"),r=Object(o["reactive"])({editData:{}}),c=function(){e.block?r.editData=d()(e.block):r.editData=d()(e.data.container)},a=function(){e.block?e.updateBlock(r.editData,e.block):e.updateContainer(Object(s["a"])(Object(s["a"])({},e.data),{},{container:r.editData}))};return Object(o["watch"])((function(){return e.block}),c,{immediate:!0}),function(){var t=[];if(e.block){var u=n.componentMap[e.block.key];u&&u.props&&t.push(Object.entries(u.props).map((function(e){var t,n=Object(E["a"])(e,2),c=n[0],a=n[1];return Object(o["createVNode"])(L["b"],{label:a.label},Y(t={input:function(){return Object(o["createVNode"])(k["a"],{modelValue:r.editData.props[c],"onUpdate:modelValue":function(e){return r.editData.props[c]=e}},null)},color:function(){return Object(o["createVNode"])(T["a"],{modelValue:r.editData.props[c],"onUpdate:modelValue":function(e){return r.editData.props[c]=e}},null)},select:function(){var e;return Object(o["createVNode"])(M["b"],{modelValue:r.editData.props[c],"onUpdate:modelValue":function(e){return r.editData.props[c]=e}},Y(e=a.options.map((function(e){return Object(o["createVNode"])(M["a"],{label:e.label,value:e.value},null)})))?e:{default:function(){return[e]}})},table:function(){return Object(o["createVNode"])(X,{propConfig:a,modelValue:r.editData.props[c],"onUpdate:modelValue":function(e){return r.editData.props[c]=e}},null)}}[a.type]())?t:{default:function(){return[t]}})}))),u&&u.model&&t.push(Object.entries(u.model).map((function(e){var t=Object(E["a"])(e,2),n=t[0],c=t[1];return Object(o["createVNode"])(L["b"],{label:c},{default:function(){return[Object(o["createVNode"])(k["a"],{modelValue:r.editData.model[n],"onUpdate:modelValue":function(e){return r.editData.model[n]=e}},null)]}})})))}else t.push(Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])(L["b"],{label:"容器宽度"},{default:function(){return[Object(o["createVNode"])(S["a"],{modelValue:r.editData.width,"onUpdate:modelValue":function(e){return r.editData.width=e}},null)]}}),Object(o["createVNode"])(L["b"],{label:"容器高度"},{default:function(){return[Object(o["createVNode"])(S["a"],{modelValue:r.editData.height,"onUpdate:modelValue":function(e){return r.editData.height=e}},null)]}})]));return Object(o["createVNode"])(L["a"],{labelPosition:"top",style:"padding:30px"},{default:function(){return[t,Object(o["createVNode"])(L["b"],null,{default:function(){return[Object(o["createVNode"])(y["a"],{type:"primary",onClick:function(){return a()}},{default:function(){return[Object(o["createTextVNode"])("应用")]}}),Object(o["createVNode"])(y["a"],{onClick:c},{default:function(){return[Object(o["createTextVNode"])("重置")]}})]}})]}})}}}),_=Object(o["defineComponent"])({props:{modelValue:{type:Object},formData:{type:Object}},emits:["update:modelValue"],setup:function(e,t){var n=Object(o["ref"])(!1),r=Object(o["ref"])(!0),c=Object(o["computed"])({get:function(){return e.modelValue},set:function(e){t.emit("update:modelValue",d()(e))}}),a=Object(o["computed"])((function(){return{width:c.value.container.width+"px",height:c.value.container.height+"px"}})),u=Object(o["inject"])("config"),i=Object(o["ref"])(null),f=v(i,c),s=f.dragstart,b=f.dragend,p=m(c,n,(function(e){D(e)})),h=p.blockMousedown,V=p.focusData,k=p.containerMousedown,g=p.lastSelectBlock,w=p.clearBlockFocus,C=j(V,g,c),D=C.mousedown,E=C.markLine,L=O(c,V),S=L.commands,T=[{label:"撤销",icon:"icon-back",handler:function(){return S.undo()}},{label:"前进",icon:"icon-forward",handler:function(){return S.redo()}},{label:"导出",icon:"icon-export",handler:function(){N({title:"导出json使用",content:JSON.stringify(c.value)})}},{label:"导入",icon:"icon-import",handler:function(){N({title:"导入json使用",content:"",footer:!0,onConfirm:function(e){S.updateContainer(JSON.parse(e))}})}},{label:"置顶",icon:"icon-place-top",handler:function(){return S.placeTop()}},{label:"置底",icon:"icon-place-bottom",handler:function(){return S.placeBottom()}},{label:"删除",icon:"icon-delete",handler:function(){return S.delete()}},{label:function(){return n.value?"编辑":"预览"},icon:function(){return n.value?"icon-edit":"icon-browse"},handler:function(){n.value=!n.value,w()}},{label:"关闭",icon:"icon-close",handler:function(){r.value=!1,w()}}],M=function(e,t){e.preventDefault(),z({el:e.target,content:function(){return Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])(x,{label:"删除",icon:"icon-delete",onClick:function(){return S.delete()}},null),Object(o["createVNode"])(x,{label:"置顶",icon:"icon-place-top",onClick:function(){return S.placeTop()}},null),Object(o["createVNode"])(x,{label:"置底",icon:"icon-place-bottom",onClick:function(){return S.placeBottom()}},null),Object(o["createVNode"])(x,{label:"查看",icon:"icon-browse",onClick:function(){N({title:"查看节点数据",content:JSON.stringify(t)})}},null),Object(o["createVNode"])(x,{label:"导入",icon:"icon-import",onClick:function(){N({title:"更新当前组件",content:"",footer:!0,onConfirm:function(e){e=JSON.parse(e),S.updateBlock(e,t)}})}},null)])}})};return function(){return r.value?Object(o["createVNode"])("div",{class:"editor"},[Object(o["createVNode"])("div",{class:"editor-left"},[u.componentList.map((function(e){return Object(o["createVNode"])("div",{class:"editor-left-item",draggable:!0,onDragstart:function(t){return s(t,e)},onDragend:b},[Object(o["createVNode"])("span",null,[e.label]),Object(o["createVNode"])("div",null,[e.preview()])])}))]),Object(o["createVNode"])("div",{class:"editor-top"},[T.map((function(e,t){var n="function"==typeof e.icon?e.icon():e.icon,r="function"==typeof e.label?e.label():e.label;return Object(o["createVNode"])("div",{class:"editor-top-button",onClick:e.handler},[Object(o["createVNode"])("i",{class:n},null),Object(o["createVNode"])("span",null,[r])])}))]),Object(o["createVNode"])("div",{class:"editor-right"},[Object(o["createVNode"])(A,{block:g.value,data:c.value,updateContainer:S.updateContainer,updateBlock:S.updateBlock},null)]),Object(o["createVNode"])("div",{class:"editor-container"},[Object(o["createVNode"])("div",{class:"editor-container-canvas"},[Object(o["createVNode"])("div",{class:"editor-container-canvas__content",style:a.value,ref:i,onMousedown:k},[c.value.blocks.map((function(t,r){return Object(o["createVNode"])(l,{class:[t.focus?"editor-block-focus":"",n.value?"editor-block-preview":""],block:t,onMousedown:function(e){return h(e,t,r)},onContextmenu:function(e){return M(e,t)},formData:e.formData},null)})),null!==E.x&&Object(o["createVNode"])("div",{class:"line-x",style:{left:E.x+"px"}},null),null!==E.y&&Object(o["createVNode"])("div",{class:"line-y",style:{top:E.y+"px"}},null)])])])]):Object(o["createVNode"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:"editor-container-canvas__content",style:[a.value,"margin:0"]},[c.value.blocks.map((function(t,n){return Object(o["createVNode"])(l,{class:"editor-block-preview",block:t,formData:e.formData},null)}))]),Object(o["createVNode"])("div",null,[Object(o["createVNode"])(y["a"],{type:"primary",onClick:function(){return r.value=!0}},{default:function(){return[Object(o["createTextVNode"])("继续编辑")]}}),JSON.stringify(e.formData)])])}}}),I=(n("a9e3"),Object(o["defineComponent"])({props:{start:{type:Number},end:{type:Number}},emits:["update:start","update:end"],setup:function(e,t){var n=Object(o["computed"])({get:function(){return e.start},set:function(e){t.emit("update:start",e)}}),r=Object(o["computed"])({get:function(){return e.end},set:function(e){t.emit("update:end",e)}});return function(){return Object(o["createVNode"])("div",{class:"range"},[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":function(e){return n.value=e}},null),[[o["vModelText"],n.value]]),Object(o["createVNode"])("span",null,[Object(o["createTextVNode"])("~")]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text","onUpdate:modelValue":function(e){return r.value=e}},null),[[o["vModelText"],r.value]])])}}}));function J(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(o["isVNode"])(e)}function Q(){var e=[],t={};return{componentList:e,componentMap:t,register:function(n){e.push(n),t[n.key]=n}}}var q=Q(),R=function(e){return{type:"input",label:e}},H=function(e){return{type:"color",label:e}},W=function(e,t){return{type:"select",label:e,options:t}},K=function(e,t){return{type:"table",label:e,table:t}};q.register({label:"下拉框",preview:function(){return Object(o["createVNode"])(M["b"],{modelValue:""},null)},render:function(e){var t,n=e.props,r=e.model;return Object(o["createVNode"])(M["b"],r.default,J(t=(n.options||[]).map((function(e,t){return Object(o["createVNode"])(M["a"],{label:e.label,value:e.value,key:t},null)})))?t:{default:function(){return[t]}})},key:"select",props:{options:K("下拉选项",{options:[{label:"显示值",field:"label"},{label:"绑定值",field:"value"}],key:"label"})},model:{default:"绑定字段"}}),q.register({label:"文本",preview:function(){return"预览文本"},render:function(e){var t=e.props;return Object(o["createVNode"])("span",{style:{color:t.color,fontSize:t.size}},[t.text||"渲染文本"])},key:"text",props:{text:R("文本内容"),color:H("字体颜色"),size:W("字体大小",[{label:"14px",value:"14px"},{label:"20px",value:"20px"},{label:"24px",value:"24px"}])}}),q.register({label:"按钮",resize:{width:!0,height:!0},preview:function(){return Object(o["createVNode"])(y["a"],null,{default:function(){return[Object(o["createTextVNode"])("预览按钮")]}})},render:function(e){var t=e.props,n=e.size;return Object(o["createVNode"])(y["a"],{style:{height:n.height+"px",width:n.width+"px"},type:t.type,size:t.size},{default:function(){return[t.text||"渲染按钮"]}})},key:"button",props:{text:R("按钮内容"),type:W("按钮类型",[{label:"基础",value:"primary"},{label:"成功",value:"success"},{label:"警告",value:"warning"},{label:"危险",value:"danger"},{label:"文本",value:"text"}]),size:W("按钮尺寸",[{label:"默认",value:""},{label:"中等",value:"medium"},{label:"小",value:"small"},{label:"极小",value:"mini"}])}}),q.register({label:"输入框",resize:{width:!0},preview:function(){return Object(o["createVNode"])(k["a"],{placeholder:"预览输入框"},null)},render:function(e){var t=e.model,n=e.size;return Object(o["createVNode"])(k["a"],Object(o["mergeProps"])({placeholder:"渲染输入框"},t.default,{style:{width:n.width+"px"}}),null)},key:"input",model:{default:"绑定字段"}}),q.register({label:"范围选择器",preview:function(){return Object(o["createVNode"])(I,{placeholder:"预览输入框"},null)},render:function(e){var t=e.model;return Object(o["createVNode"])(I,{start:t.start.modelValue,end:t.end.modelValue,"onUpdate:start":t.start["onUpdate:modelValue"],"onUpdate:end":t.end["onUpdate:modelValue"]},null)},model:{start:"开始范围字段",end:"结束范围字段"},key:"range"});var G={components:{Editor:_,Range:I},setup:function(){var e=Object(o["ref"])(a);Object(o["provide"])("config",q);var t=Object(o["ref"])({username:"zfjg",password:123,start:0,end:100});return{state:e,formData:t}}};n("ff86");G.render=c;var Z=G;Object(o["createApp"])(Z).mount("#app")},a818:function(e,t,n){},cb05:function(e,t,n){},ff86:function(e,t,n){"use strict";n("cb05")}});
//# sourceMappingURL=app.4b19795c.js.map