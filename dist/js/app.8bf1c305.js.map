{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue","webpack:///./src/packages/block-resize.jsx","webpack:///./src/packages/editor-block.jsx","webpack:///./src/packages/events.js","webpack:///./src/packages/useMenuDragger.js","webpack:///./src/packages/useFocus.js","webpack:///./src/packages/useBlockDragger.js","webpack:///./src/packages/useCommand.js","webpack:///./src/components/Dialog.jsx","webpack:///./src/components/Dropdown.jsx","webpack:///./src/components/TableDialog.jsx","webpack:///./src/packages/table-editor.jsx","webpack:///./src/packages/editor-operator.jsx","webpack:///./src/packages/editor.jsx","webpack:///./src/components/Range.jsx","webpack:///./src/utils/editor-config.jsx","webpack:///./src/App.vue?eabf","webpack:///./src/main.js","webpack:///./src/App.vue?b8a1"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","state","formData","defineComponent","props","block","type","component","setup","resize","width","height","onmousemove","e","clientX","clientY","startX","startY","startWidth","startHeight","startLeft","startTop","direction","horizontal","vertical","durX","durY","top","left","hasResize","onmouseup","console","log","document","body","removeEventListener","onmousedown","stopPropagation","addEventListener","blockStyles","computed","zIndex","config","inject","blockRef","ref","onMounted","offsetWidth","offsetHeight","alignCenter","componentMap","RenderComponent","render","size","model","keys","reduce","prev","modelName","propName","modelValue","v","focus","events","mitt","useMenuDragger","containerRef","currentComponent","dragenter","dataTransfer","dropEffect","dragover","preventDefault","dragleave","drop","blocks","offsetY","offsetX","dragstart","emit","dragend","useFocus","previewRef","callback","selectIndex","lastSelectBlock","focusData","unfocused","forEach","clearBlockFocus","containerMousedown","blockMousedown","index","shiftKey","useBlockDragger","dragState","dragging","markLine","reactive","x","y","mousedown","BWidth","BHeight","startPos","map","lines","container","ATop","ALeft","AWidth","AHeight","showTop","showLeft","mousemove","mouseup","moveX","moveY","Math","abs","idx","useCommand","current","queue","commands","commandArray","destroyArray","registry","command","execute","redo","undo","pushQueue","keyboard","item","init","this","before","start","deepcopy","end","drag","on","off","after","newValue","newBlock","oldBlock","indexOf","maxZIndex","max","Infinity","minZIndex","min","dur","keyboardEvent","keyCodes","90","89","46","onKeydown","ctrlKey","keyCode","keyString","join","onUnmounted","fn","vm","DialogComponent","option","ctx","isShow","expose","showDialog","onCancel","onConfirm","content","title","default","footer","$dialog","el","createElement","createVNode","appendChild","exposed","DropdownItem","label","String","icon","hide","DropdownComponent","showDropdown","getBoundingClientRect","provide","classes","styles","onMousedownDocument","contains","target","onBeforeUnmount","$dropdown","TableComponent","editData","methods","show","add","table","options","row","field","$tableDialog","propConfig","Array","emits","set","updateContainer","Function","updateBlock","reset","watch","immediate","entries","input","color","select","opt","editorRef","containerStyles","buttons","handler","JSON","stringify","text","parse","placeTop","placeBottom","delete","onContextMenuBlock","componentList","preview","btn","Number","createEditorConfig","register","registerConfig","createInputProp","createColorProp","createSelectProp","createTableProp","fontSize","components","Editor","Range","username","password","createApp","App","mount"],"mappings":"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","file":"js/app.8bf1c305.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template>\n  <div class=\"app\">\n    <Editor v-model=\"state\" :formData=\"formData\"></Editor>\n\n\n  </div>\n</template>\n\n<script>\nimport { ref ,provide} from 'vue';\nimport data from './data.json';\nimport Editor from './packages/editor';\nimport {registerConfig as config} from './utils/editor-config';\nimport Range from './components/Range.jsx'\nexport default {\n  components:{\n    Editor,\n    Range\n  },\n  setup(){\n    const state = ref(data);\n    provide('config',config); // 将组件的配置直接传值\n\n    const formData = ref({\n      username:'zfjg',\n      password:123,\n      start:0,\n      end:100\n    })\n\n    return {\n      state,\n      formData\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\">\n.app{\n  position:fixed;\n  top:20px;\n  left:20px;\n  right:20px;\n  bottom:20px;\n}\n</style>\n","import { defineComponent } from \"vue\";\n\nexport default defineComponent({\n    props: {\n        block: { type: Object },\n        component: { type: Object }\n    },\n    setup(props) {\n        const { width, height } = props.component.resize || {}\n        let data = {}\n        const onmousemove = (e) => {\n            let {clientX,clientY} = e;\n            let {startX,startY,startWidth,startHeight,startLeft,startTop,direction} = data;\n\n            \n            if(direction.horizontal == 'center'){  // 如果拖拽的是 中间的点 X轴是不变的\n                clientX = startX\n            }\n            if(direction.vertical == 'center'){  // 只能改横向 纵向是不发生变化的\n                clientY = startY\n            }\n\n            let durX = clientX - startX;\n            let durY = clientY - startY;\n\n            if(direction.vertical == 'start'){ // 针对反向拖拽的点 需要取反，拿到正确的组件top和left\n                durY = -durY\n                props.block.top = startTop - durY\n            }\n            if(direction.horizontal == 'start'){\n                durX = -durX\n                props.block.left = startLeft - durX\n            }\n\n\n            const width = startWidth + durX;\n            const height = startHeight + durY;\n\n            props.block.width = width;\n            props.block.height = height; // 拖拽的时候 改变了宽高\n            props.block.hasResize = true\n\n        }\n        const onmouseup = () => {\n            console.log('mouseup')\n            document.body.removeEventListener('mousemove', onmousemove)\n            document.body.removeEventListener('mouseup', onmouseup)\n        }\n        const onmousedown = (e, direction) => {\n            e.stopPropagation();\n            data = {\n                startX: e.clientX,\n                startY: e.clientY,\n                startWidth: props.block.width,\n                startHeight: props.block.height,\n                startLeft: props.block.left,\n                startTop: props.block.top,\n                direction\n            }\n            document.body.addEventListener('mousemove', onmousemove)\n            document.body.addEventListener('mouseup', onmouseup)\n        }\n        return () => <>\n            {width && <>\n                <div class=\"block-resize block-resize-left\"\n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'center' })}></div>\n                <div class=\"block-resize block-resize-right\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'center' })}></div>\n            </>}\n\n            {height && <>\n                <div class=\"block-resize block-resize-top\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'center', vertical: 'start' })}></div>\n                <div class=\"block-resize block-resize-bottom\"\n                     onMousedown={e => onmousedown(e, { horizontal: 'center', vertical: 'end' })}></div>\n            </>}\n\n            {width && height && <>\n                <div class=\"block-resize block-resize-top-left\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'start' })}></div>\n                <div class=\"block-resize block-resize-top-right\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'start' })}></div>\n                <div class=\"block-resize block-resize-bottom-left\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'start', vertical: 'end' })}></div>\n                <div class=\"block-resize block-resize-bottom-right\" \n                    onMousedown={e => onmousedown(e, { horizontal: 'end', vertical: 'end' })}\n                ></div>\n            </>}\n        </>\n    }\n})","import { computed, defineComponent, inject, onMounted, ref } from \"vue\";\nimport BlockResize from './block-resize'\nexport default defineComponent({\n    props: {\n        block: { type: Object },\n        formData: { type: Object }\n    },\n    setup(props) {\n        const blockStyles = computed(() => ({\n            top: `${props.block.top}px`,\n            left: `${props.block.left}px`,\n            zIndex: `${props.block.zIndex}`\n        }));\n        const config = inject('config');\n\n        const blockRef = ref(null)\n        onMounted(() => {\n            let { offsetWidth, offsetHeight } = blockRef.value;\n            if (props.block.alignCenter) { // 说明是拖拽松手的时候才渲染的，其他的默认渲染到页面上的内容不需要居中\n                props.block.left = props.block.left - offsetWidth / 2;\n                props.block.top = props.block.top - offsetHeight / 2; // 原则上重新派发事件\n                props.block.alignCenter = false; // 让渲染后的结果才能去居中\n            }\n            props.block.width = offsetWidth;\n            props.block.height = offsetHeight;\n        })\n\n        return () => {\n            // 通过block的key属性直接获取对应的组件 \n            const component = config.componentMap[props.block.key];\n            // 获取render函数\n\n\n            const RenderComponent = component.render({\n                size: props.block.hasResize ? { width: props.block.width, height: props.block.height } : {},\n                props: props.block.props,\n                // model: props.block.model  => {default:'username'}  => {modelValue: FormData.username,\"onUpdate:modelValue\":v=> FormData.username = v}\n\n                model: Object.keys(component.model || {}).reduce((prev, modelName) => {\n                    let propName = props.block.model[modelName]; // 'username'\n                    prev[modelName] = {\n                        modelValue: props.formData[propName], // zfjg\n                        \"onUpdate:modelValue\": v => props.formData[propName] = v\n                    }\n                    return prev;\n                }, {})\n            });\n            const { width, height } = component.resize || {}\n            return <div class=\"editor-block\" style={blockStyles.value} ref={blockRef}>\n                {RenderComponent}\n                {/* 传递block的目的是为了修改当前block的宽高， component中存放了是修改高度还是宽度 */}\n                {props.block.focus && (width || height) && <BlockResize\n                    block={props.block}\n                    component={component}\n                ></BlockResize>}\n            </div>\n        }\n    }\n})","import mitt from 'mitt';\nexport const events = mitt(); // 导出一个发布订阅的对象 \n","import {events} from './events';\nexport function useMenuDragger(containerRef,data){\n    let currentComponent = null;\n    const dragenter = (e) => {\n        e.dataTransfer.dropEffect = 'move'; // h5拖动的图标\n    }\n    const dragover = (e) => {\n        e.preventDefault();\n    }\n    const dragleave = (e) => {\n        e.dataTransfer.dropEffect = 'none';\n    }\n    const drop = (e) => {\n        // 先留在这\n        let blocks =  data.value.blocks; // 内部已经渲染的组件\n        data.value = {...data.value,blocks:[\n            ...blocks,\n            {\n                top:e.offsetY,\n                left:e.offsetX,\n                zIndex:1,\n                key:currentComponent.key,\n                alignCenter:true, // 希望松手的时候你可以居中\n                props:{},\n                model:{}\n            }\n        ]}\n        currentComponent = null;\n    }\n    const dragstart = (e, component) => {\n        // dragenter进入元素中 添加一个移动的标识\n        // dragover 在目标元素经过 必须要阻止默认行为 否则不能触发drop\n        // dragleave 离开元素的时候 需要增加一个禁用标识\n        // drop 松手的时候 根据拖拽的组件 添加一个组件\n        containerRef.value.addEventListener('dragenter', dragenter)\n        containerRef.value.addEventListener('dragover', dragover)\n        containerRef.value.addEventListener('dragleave', dragleave)\n        containerRef.value.addEventListener('drop', drop)\n        currentComponent = component\n        events.emit('start'); // 发布start\n    }\n    const dragend = (e)=>{\n        containerRef.value.removeEventListener('dragenter', dragenter)\n        containerRef.value.removeEventListener('dragover', dragover)\n        containerRef.value.removeEventListener('dragleave', dragleave)\n        containerRef.value.removeEventListener('drop', drop)\n        events.emit('end'); // 发布end\n    }\n    return {\n        dragstart,\n        dragend\n    }\n}","import {computed, ref} from 'vue'\nexport function useFocus(data,previewRef,callback){ // 获取哪些元素被选中了\n\n    const selectIndex = ref(-1); // 表示没有任何一个被选中\n\n    // 最后选择的那一个\n    const lastSelectBlock = computed(()=>data.value.blocks[selectIndex.value])\n\n    const focusData = computed(() => {\n        let focus = [];\n        let unfocused = [];\n        data.value.blocks.forEach(block => (block.focus ? focus : unfocused).push(block));\n        return { focus, unfocused }\n    });\n    const clearBlockFocus = () => {\n        data.value.blocks.forEach(block => block.focus = false);\n    }\n    const containerMousedown = () => {\n        if(previewRef.value) return\n        clearBlockFocus(); // 点击容器让选中的失去焦点\n        selectIndex.value = -1;\n    }\n    const blockMousedown = (e, block,index) => {\n        if(previewRef.value) return\n        e.preventDefault();\n        e.stopPropagation();\n        // block上我们规划一个属性 focus 获取焦点后就将focus变为true\n        if (e.shiftKey) {\n            if(focusData.value.focus.length <=1) {\n                block.focus = true; // 当前只有一个节点被选中时 摁住shift键也不会切换focus状态\n            }else{\n                block.focus = !block.focus;\n            }\n        } else {\n            if (!block.focus) {\n                clearBlockFocus();\n                block.focus = true; // 要清空其他人foucs属性\n            } // 当自己已经被选中了，在次点击时还是选中状态\n        }\n        selectIndex.value = index;\n        callback(e)\n    }\n    return {\n        blockMousedown,\n        containerMousedown,\n        focusData,\n        lastSelectBlock,\n        clearBlockFocus\n    }\n}","import { reactive } from \"vue\";\nimport { events } from \"./events\";\n\nexport function useBlockDragger(focusData, lastSelectBlock, data) {\n    let dragState = {\n        startX: 0,\n        startY: 0,\n        dragging:false // 默认不是正在拖拽\n    }\n    let markLine = reactive({\n        x: null,\n        y: null\n    })\n    const mousedown = (e) => {\n\n        const { width: BWidth, height: BHeight } = lastSelectBlock.value; // 拖拽的最后的元素\n\n        dragState = {\n            startX: e.clientX,\n            startY: e.clientY, // 记录每一个选中的位置\n            startLeft: lastSelectBlock.value.left, // b点拖拽前的位置 left和top\n            startTop: lastSelectBlock.value.top,\n            dragging:false,\n            startPos: focusData.value.focus.map(({ top, left }) => ({ top, left })),\n            lines: (() => {\n                const { unfocused } = focusData.value; // 获取其他没选中的以他们的位置做辅助线\n                let lines = { x: [], y: [] }; // 计算横线的位置用y来存放  x存的是纵向的\n                [...unfocused,\n                    {\n                        top: 0,\n                        left: 0,\n                        width: data.value.container.width,\n                        height: data.value.container.height\n                    }\n                ].forEach((block) => {\n                    const { top: ATop, left: ALeft, width: AWidth, height: AHeight } = block;\n                    // 当此元素拖拽到和A元素top一致的时候，要显示这根辅助线，辅助线的位置就是ATop\n                    lines.y.push({ showTop: ATop, top: ATop });\n                    lines.y.push({ showTop: ATop, top: ATop - BHeight }); // 顶对底\n                    lines.y.push({ showTop: ATop + AHeight / 2, top: ATop + AHeight / 2 - BHeight / 2 }); // 中对中\n                    lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight }); // 底对顶\n                    lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight - BHeight }); // 底对底\n\n                    lines.x.push({ showLeft: ALeft, left: ALeft }); // 左对左边\n                    lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth }); // 右边对左边\n                    lines.x.push({ showLeft: ALeft + AWidth / 2, left: ALeft + AWidth / 2 - BWidth / 2 })\n                    lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth - BWidth })\n                    lines.x.push({ showLeft: ALeft, left: ALeft - BWidth }) // 左对右\n                });\n                return lines\n            })()\n        }\n        document.addEventListener('mousemove', mousemove);\n        document.addEventListener('mouseup', mouseup)\n    }\n    const mousemove = (e) => {\n        let { clientX: moveX, clientY: moveY } = e;\n        if(!dragState.dragging){\n            dragState.dragging = true;\n            events.emit('start'); // 触发事件就会记住拖拽前的位置\n        }\n\n        // 计算当前元素最新的left和top 去线里面找，找到显示线\n        // 鼠标移动后 - 鼠标移动前 + left就好了\n        let left = moveX - dragState.startX + dragState.startLeft;\n        let top = moveY - dragState.startY + dragState.startTop;\n\n        // 先计算横线  距离参照物元素还有5像素的时候 就显示这根线\n\n        let y = null;\n        let x = null;\n        for (let i = 0; i < dragState.lines.y.length; i++) {\n            const { top: t, showTop: s } = dragState.lines.y[i]; // 获取每一根线\n            if (Math.abs(t - top) < 5) { // 如果小于五说明接近了 \n                y = s; // 线要现实的位置\n                moveY = dragState.startY - dragState.startTop + t; // 容器距离顶部的距离 + 目标的高度 就是最新的moveY\n                // 实现快速和这个元素贴在一起\n                break; // 找到一根线后就跳出循环\n            }\n        }\n        for (let i = 0; i < dragState.lines.x.length; i++) {\n            const { left: l, showLeft: s } = dragState.lines.x[i]; // 获取每一根线\n            if (Math.abs(l - left) < 5) { // 如果小于五说明接近了 \n                x = s; // 线要现实的位置\n                moveX = dragState.startX - dragState.startLeft + l; // 容器距离顶部的距离 + 目标的高度 就是最新的moveY\n                // 实现快速和这个元素贴在一起\n                break; // 找到一根线后就跳出循环\n            }\n        }\n        markLine.x = x; // markline 是一个响应式数据 x，y更新了会导致视图更新\n        markLine.y = y;\n\n\n        let durX = moveX - dragState.startX; // 之前和之后的距离\n        let durY = moveY - dragState.startY;\n        focusData.value.focus.forEach((block, idx) => {\n            block.top = dragState.startPos[idx].top + durY;\n            block.left = dragState.startPos[idx].left + durX;\n        })\n    }\n    const mouseup = (e) => {\n        document.removeEventListener('mousemove', mousemove);\n        document.removeEventListener('mouseup', mouseup)\n        markLine.x = null;\n        markLine.y = null;\n        if(dragState.dragging){ // 如果只是点击就不会触发\n            events.emit('end');\n        }\n    }\n\n    return {\n        mousedown,\n        markLine\n    }\n}","import deepcopy from \"deepcopy\";\nimport { onUnmounted } from \"vue\";\nimport { events } from \"./events\";\n//维护中间顶部菜单栏所有的按钮操作\nexport function useCommand(data, focusData) {\n    const state = { // 前进后退需要指针\n        current: -1, // 前进后退的索引值\n        queue: [], //  存放所有的操作命令\n        commands: {}, // 制作所有命令和执行功能一个映射表  undo : ()=>{}  redo:()=>{}\n        commandArray: [], // 存放所有的命令\n        destroyArray: []\n    }\n    const registry = (command) => {\n        state.commandArray.push(command);\n        state.commands[command.name] = (...args) => { // 命令名字对应执行函数\n            const { redo, undo } = command.execute(...args);\n            redo();//默认先执行一次redo\n            if (!command.pushQueue) { // 不需要放到队列中直接跳过即可\n                return\n            }\n            let { queue, current } = state;\n\n            // 如果先放了 组件1 -》 组件2 => 组件3 =》 组件4 - - -》 组件3\n            // 组件1 -> 组件3\n            if (queue.length > 0) {\n                queue = queue.slice(0, current + 1); // 可能在放置的过程中有撤销操作，所以根据当前最新的current值来计算新的对了\n                state.queue = queue;\n            }\n            queue.push({ redo, undo }); // 保存指令的前进后退\n            state.current = current + 1;\n            console.log(queue);\n            // console.log(undo);\n            // console.log(redo)\n            // console.log(state.commandArray);\n        }\n    }\n    // 注册我们需要的命令\n    registry({//前进\n        name: 'redo',\n        keyboard: 'ctrl+y',\n        execute() {\n            return {\n                redo() {\n                    let item = state.queue[state.current + 1]; // 找到当前的下一步还原操作\n                    if (item) {\n                        item.redo && item.redo();\n                        state.current++;\n                    }\n                }\n            }\n        }\n    })\n    registry({//撤销：回到上一步\n        name: 'undo',\n        keyboard: 'ctrl+z',\n        execute() {\n            return {\n                redo() {\n                    if (state.current == -1) return; // 没有可以撤销的了\n                    let item = state.queue[state.current]; // 找到上一步还原\n                    if (item) {\n                        item.undo && item.undo(); // 这里没有操作队列\n                        state.current--;\n                    }\n                }\n            }\n        }\n    });\n    registry({ //drag 如果希望将操作放到队列中可以增加一个属性 标识等会操作要放到队列中\n        name: 'drag',\n        pushQueue: true,\n        init() { // 初始化操作 默认就会执行，拖拽开始的时候保存初始状态，拖拽结束的时候调用drag.execute()指令\n            this.before = null\n            // 监控拖拽开始事件，保存之前的状态\n            const start = () => {\n                this.before = deepcopy(data.value.blocks)\n            }\n            // 拖拽之后需要触发对应的指令\n            const end = () => {\n                state.commands.drag()\n            }\n            //监控当前派发的start和end事件\n            events.on('start', start)\n            events.on('end', end)\n            //解绑事件\n            return () => {\n                events.off('start', start);\n                events.off('end', end)\n            }\n        },\n        execute() { // state.commands.drag()\n            let before = this.before;//之前的状态\n            let after = data.value.blocks // 最新的状态\n            return {\n                redo() { // 默认一松手 就直接把当前事情做了\n                    data.value = { ...data.value, blocks: after }\n                },\n                undo() { // 前一步的\n                    data.value = { ...data.value, blocks: before }\n                }\n            }\n        }\n    });\n    // 带有历史记录常用的模式 \n    registry({// 更新整个容器\n        name: 'updateContainer',\n        pushQueue: true,\n        execute(newValue) {\n            let state = {\n                before: data.value, // 当前的值\n                after: newValue // 新值\n            }\n            return {\n                redo: () => {\n                    data.value = state.after\n                },\n                undo: () => {\n                    data.value = state.before\n                }\n            }\n        }\n    })\n    registry({// 更新某个组件\n        name: 'updateBlock',\n        pushQueue: true,\n        execute(newBlock, oldBlock) {\n            let state = {\n                before: data.value.blocks,\n                after: (() => {\n                    let blocks = [...data.value.blocks]; // 拷贝一份用于新的block\n                    const index = data.value.blocks.indexOf(oldBlock); // 找到右键需要更新的老组件的索引号\n                    if (index > -1) {\n                        blocks.splice(index, 1, newBlock)//把老的组件的的信息用输入的新的组件信息替换掉\n                    }\n                    return blocks;\n                })()\n            }\n            return {\n                redo: () => {\n                    data.value = { ...data.value, blocks: state.after }\n                },\n                undo: () => {\n                    data.value = { ...data.value, blocks: state.before }\n                }\n            }\n        }\n    })\n    registry({ // 置顶操作\n        name: 'placeTop',\n        pushQueue: true,\n        execute() {\n            let before = deepcopy(data.value.blocks);\n            let after = (() => { // 置顶就是在所有的block中找到最大的\n                let { focus, unfocused } = focusData.value;\n                let maxZIndex = unfocused.reduce((prev, block) => {\n                    return Math.max(prev, block.zIndex);\n                }, -Infinity);\n                focus.forEach(block => block.zIndex = maxZIndex + 1); // 让当前选中的比最大的+1 即可\n                return data.value.blocks\n            })()\n\n            return {\n                undo: () => {\n                    // 如果当前blocks 前后一致 则不会更新\n                    data.value = { ...data.value, blocks: before }\n                },\n                redo: () => {\n                    data.value = { ...data.value, blocks: after }\n                }\n            }\n        }\n    })\n    registry({ // 置底操作\n        name: 'placeBottom',\n        pushQueue: true,\n        execute() {\n            let before = deepcopy(data.value.blocks);\n            let after = (() => { // 置顶就是在所有的block中找到最小的 block\n                let { focus, unfocused } = focusData.value;\n                let minZIndex = unfocused.reduce((prev, block) => {\n                    return Math.min(prev, block.zIndex);\n                }, Infinity) - 1;\n                // 不能直接 - 1 因为index 不能出现负值 负值就看不到组件了\n                if (minZIndex < 0) { // 这里如果是赋值则让没选中的向上 ，自己变成0\n                    const dur = Math.abs(minZIndex);\n                    minZIndex = 0;\n                    unfocused.forEach(block => block.zIndex += dur)\n                }\n                focus.forEach(block => block.zIndex = minZIndex); // 控制选中的值\n                return data.value.blocks\n            })()\n\n            return {\n                undo: () => {\n                    // 如果当前blocks 前后一致 则不会更新\n                    data.value = { ...data.value, blocks: before }\n                },\n                redo: () => {\n                    data.value = { ...data.value, blocks: after }\n                }\n            }\n        }\n    })\n    registry({// 删除\n        name: 'delete',\n        keyboard: 'delete',\n        pushQueue: true,\n        execute() {\n            let state = {\n                before: deepcopy(data.value.blocks), // 当前的值\n                after: focusData.value.unfocused // 选中的都删除了 留下的都是没选中的\n            }\n            return {\n                redo: () => {\n                    data.value = { ...data.value, blocks: state.after }\n                },\n                undo: () => {\n                    data.value = { ...data.value, blocks: state.before }\n                }\n            }\n        }\n    })\n    const keyboardEvent = (() => {\n        const keyCodes = {\n            90: 'z',\n            89: 'y',\n            46: 'delete'\n        }\n        const onKeydown = (e) => {\n            const { ctrlKey, keyCode } = e; // ctrl+z  / ctrl+y\n            let keyString = [];\n            if (ctrlKey) {\n                keyString.push('ctrl');\n            }\n            keyString.push(keyCodes[keyCode]);\n            keyString = keyString.join('+');\n\n            state.commandArray.forEach(({ keyboard, name }) => {\n                if (!keyboard) return; // 没有键盘事件\n                if (keyboard === keyString) {\n                    state.commands[name]();\n                    e.preventDefault();\n                }\n            })\n        }\n        const init = () => { // 初始化事件\n            window.addEventListener('keydown', onKeydown)\n            return () => { // 销毁事件\n                window.removeEventListener('keydown', onKeydown)\n            }\n        }\n        return init\n    })();\n    //立即执行的箭头函数\n    // 初始化键盘事件和命令初始化\n    (() => {\n        // 监听键盘事件\n        state.destroyArray.push(keyboardEvent())\n        state.commandArray.forEach(command => command.init && state.destroyArray.push(command.init()))\n    })();\n\n    onUnmounted(() => { // 清理绑定的事件\n        state.destroyArray.forEach(fn => fn && fn());\n    })\n    return state;\n}","import { ElDialog, ElButton, ElInput } from \"element-plus\";\nimport { createVNode, defineComponent, reactive, render } from \"vue\";\n\nconst DialogComponent = defineComponent({\n    props: {\n        option: { type: Object }\n    },\n    setup(props, ctx) {\n        const state = reactive({\n            option: props.option, // 用户给组件的属性\n            isShow: false\n        })\n        ctx.expose({ // 让外界可以调用组件的方法\n            showDialog(option) {\n                state.option = option;\n                state.isShow = true;\n            }\n        });\n        const onCancel = () => {\n            state.isShow = false;\n        }\n        const onConfirm = () => {\n            state.isShow = false;\n            state.option.onConfirm && state.option.onConfirm(state.option.content)\n        }\n        return () => {\n            return <ElDialog v-model={state.isShow} title={state.option.title}>\n                {{\n                    default: () => <ElInput\n                        type=\"textarea\"\n                        v-model={state.option.content}\n                        rows={10}\n                    ></ElInput>,\n                    footer: () => state.option.footer && <div>\n                        <ElButton onClick={onCancel}>取消</ElButton>\n                        <ElButton type=\"primary\" onClick={onConfirm}>确定</ElButton>\n                    </div>\n                }}\n            </ElDialog>\n        }\n    }\n})\nlet vm;\nexport function $dialog(option) {\n    // element-plus中是有el-dialog组件 \n    // 手动挂载组件   new SubComponent.$mount()\n    if (!vm) {\n        let el = document.createElement('div');\n        vm = createVNode(DialogComponent, { option }); // 将组件渲染成虚拟节点\n\n        // 这里需要将el 渲染到我们的页面中\n        document.body.appendChild((render(vm, el), el)) // 渲染成真实节点扔到页面中\n    }\n    // 将组件渲染到这个el元素上\n    let { showDialog } = vm.component.exposed\n    showDialog(option); // 其他说明组件已经有了只需要显示出来即可\n}","import { provide, inject, computed, createVNode, defineComponent, render, reactive, onMounted, ref, onBeforeUnmount } from \"vue\";\n\nexport const DropdownItem = defineComponent({\n    props: {\n        label: String,\n        icon: String\n    },\n    setup(props) {\n        let { label, icon } = props\n        let hide = inject('hide')\n        return () => <div class=\"dropdown-item\" onClick={hide}>\n            <i class={icon}></i>\n            <span>{label}</span>\n        </div>\n    }\n})\nconst DropdownComponent = defineComponent({\n    props: {\n        option: { type: Object },\n    },\n\n    setup(props, ctx) {\n        const state = reactive({\n            option: props.option,\n            isShow: false,\n            top: 0,\n            left: 0\n        })\n        ctx.expose({\n            showDropdown(option) {\n                state.option = option;\n                state.isShow = true;\n                //getBoundingClientRect() 返回的是矩形的集合，表示了当前盒子在浏览器中的位置以及自身占据的空间的大小，\n                //除了 width 和 height，其余的属性是相对于 视图窗口的左上角 来计算的\n                let { top, left, height } = option.el.getBoundingClientRect();\n                state.top = top + height; //右键菜单放在组件的正下方\n                state.left = left;\n            }\n        });\n        provide('hide', () => state.isShow = false)\n\n        const classes = computed(() => [\n            'dropdown',\n            {\n                'dropdown-isShow': state.isShow\n            }\n        ])\n        const styles = computed(() => ({\n            top: state.top + 'px',\n            left: state.left + 'px'\n        }))\n        const el = ref(null) //获取菜单栏的 dom 元素\n        const onMousedownDocument = (e) => {\n            if (!el.value.contains(e.target)) { // 如果点击的是dropdown内部 什么都不做\n                state.isShow = false;\n            }\n        }\n        onMounted(() => {\n            // 事件的传递行为是先捕获 在冒泡\n            // 之前为了阻止事件传播 我们给block 都增加了stopPropagation\n            document.body.addEventListener('mousedown', onMousedownDocument, true)\n        })\n\n        onBeforeUnmount(() => {\n            document.body.removeEventListener('mousedown', onMousedownDocument)\n        })\n        return () => {\n            return <div class={classes.value} style={styles.value} ref={el}>\n                {state.option.content()}\n            </div>\n        }\n    }\n})\n\n\nlet vm;\nexport function $dropdown(option) {\n    // element-plus中是有el-dialog组件 \n    // 手动挂载组件   new SubComponent.$mount()\n    if (!vm) {\n        let el = document.createElement('div');\n        vm = createVNode(DropdownComponent, { option }); // 将组件渲染成虚拟节点\n\n        // 这里需要将el 渲染到我们的页面中\n        document.body.appendChild((render(vm, el), el)) // 渲染成真实节点扔到页面中\n    }\n    // 将组件渲染到这个el元素上\n    let { showDropdown } = vm.component.exposed\n    showDropdown(option); // 其他说明组件已经有了只需要显示出来即可\n}","import deepcopy from \"deepcopy\";\nimport { ElDialog, ElButton, ElTable, ElTableColumn,ElInput } from \"element-plus\";\nimport { defineComponent, reactive, createVNode, render } from \"vue\";\n\nconst TableComponent = defineComponent({\n    props: {\n        option: { type: Object }\n    },\n    setup(props, ctx) {\n        const state = reactive({\n            option: props.option,\n            isShow: false,\n            editData: [] // 编辑的数据\n        })\n        const methods = {\n            show(option) {\n                state.option = option; // 把用户的配置缓存起来\n                state.isShow = true; // 更改显示状态\n                state.editData = deepcopy(option.data); // 通过渲染的数据 默认展现\n            }\n        }\n        const add = () =>{\n            state.editData.push({})\n        }\n        const onCancel = ()=>{\n            state.isShow = false;\n        }\n        const onConfirm = ()=>{\n            state.option.onConfirm(state.editData);\n            onCancel()\n        }\n        ctx.expose(methods);\n        return () => {\n          \n            return <ElDialog v-model={state.isShow} title={state.option.config.label}>\n                {{\n                    default: () => (\n                        <div>\n                            <div><ElButton onClick={add}>添加</ElButton><ElButton>重置</ElButton></div>\n                            <ElTable data={state.editData}>\n                                <ElTableColumn type=\"index\"></ElTableColumn>\n                                {state.option.config.table.options.map((item,index)=>{\n                                    return <ElTableColumn label={item.label}>\n                                        {{\n                                            default:({row})=> <ElInput v-model={row[item.field]}></ElInput>\n                                        }}\n                                    </ElTableColumn>\n                                })}\n                                <ElTableColumn label=\"操作\">\n                                    <ElButton type=\"danger\">删除</ElButton>\n                                </ElTableColumn>\n                            </ElTable>\n                        </div>\n                    ),\n                    footer:()=><>\n                        <ElButton onClick={onCancel}>取消</ElButton>\n                        <ElButton onClick={onConfirm}>确定</ElButton>\n                    </>\n                }}\n            </ElDialog>\n        }\n    }\n})\nlet vm;\nexport const $tableDialog = (option) => {\n    if (!vm) {\n        const el = document.createElement('div');\n        vm = createVNode(TableComponent, { option })\n        let r = render(vm, el);\n        document.body.appendChild(el);\n    }\n    let { show } = vm.component.exposed;\n    show(option);\n}","import deepcopy from \"deepcopy\";\nimport { ElButton, ElTag } from \"element-plus\";\nimport { defineComponent ,computed} from \"vue\";\nimport { $tableDialog } from \"../components/TableDialog\";\n\nexport default defineComponent({\n    props: {\n        propConfig: { type: Object },\n        modelValue: { type: Array }\n    },\n    emits: ['update:modelValue'],\n    setup(props, ctx) {\n        const data = computed({\n            get() {\n                return props.modelValue || []\n            },\n            set(newValue) {\n                ctx.emit('update:modelValue', deepcopy(newValue))\n            }\n        })\n        const add = () =>{\n            $tableDialog({\n                config:props.propConfig,\n                data:data.value,\n                onConfirm(value){\n                    data.value = value; // 当点击确认的时候 将数据更新\n                }\n            })\n        }\n        return () => {\n            return <div>\n                {/* 此下拉框没有任何数据 直接显示一个按钮即可 */}\n                {(!data.value || data.value.length == 0)  && <ElButton onClick={add}>添加</ElButton>}\n\n                {/* [{label:'',value:''},{label:'',value:''}]  */}\n                {(data.value || []).map(item=><ElTag onClick={add}>{item[props.propConfig.table.key]}</ElTag>)}\n            </div>\n        }\n    }\n})","import { defineComponent, inject, watch, reactive } from \"vue\";\nimport { ElForm, ElFormItem, ElButton, ElInputNumber, ElColorPicker, ElSelect, ElOption, ElInput } from 'element-plus'\nimport deepcopy from \"deepcopy\";\nimport TableEditor from \"./table-editor\";\n\nexport default defineComponent({\n    props: {\n        block: { type: Object }, // 用户最后选中的元素\n        data: { type: Object }, // 当前所有的数据\n        updateContainer: { type: Function },\n        updateBlock: { type: Function }\n    },\n    setup(props, ctx) {\n        const config = inject('config'); // 注入组件的配置信息，在editor-config.jsx中导出的\n        const state = reactive({\n            editData: {}\n        })\n        const reset = () => {\n            if (!props.block) { // 说明要绑定的是容器的宽度和高度\n                state.editData = deepcopy(props.data.container)\n            } else {\n                state.editData = deepcopy(props.block);\n                console.log(state.editData)\n            }\n        }\n        const apply = () => {\n            if (!props.block) { // 更改组件容器的大小\n                props.updateContainer({ ...props.data, container: state.editData });\n            } else { // 更改组件的配置\n                props.updateBlock(state.editData, props.block);\n            }\n\n        }\n        //immediate 的作用就是设置是否立即执行监控，\n        //当我们将其值设置为 true 时，那么被监控的对象在初始化时就会触发一次 watch 方法，相当于页面一刷新就会触发。\n        watch(() => props.block, reset, { immediate: true })\n        return () => {\n            let content = []\n            if (!props.block) {//没有选中组件时，右侧显示容器属性\n                content.push(<>\n                    <ElFormItem label=\"容器宽度\">\n                        <ElInputNumber v-model={state.editData.width}></ElInputNumber>\n                    </ElFormItem>\n                    <ElFormItem label=\"容器高度\">\n                        <ElInputNumber v-model={state.editData.height}></ElInputNumber>\n                    </ElFormItem>\n                </>)\n            } else {//有组件被选中时，右侧显示组件属性\n                let component = config.componentMap[props.block.key];\n                if (component && component.props) { // {text:{type:'xxx'},size:{},color:{}}\n                    // {text:xxx,size:13px,color:#fff}\n                    content.push(Object.entries(component.props).map(([propName, propConfig]) => {//显示组件的所有配置项\n                        return <ElFormItem label={propConfig.label}>\n                            {{\n                                input: () => <ElInput v-model={state.editData.props[propName]}></ElInput>,\n                                color: () => <ElColorPicker v-model={state.editData.props[propName]}></ElColorPicker>,\n                                select: () => <ElSelect v-model={state.editData.props[propName]}>\n                                    {propConfig.options.map(opt => {\n                                        return <ElOption label={opt.label} value={opt.value}></ElOption>\n                                    })}\n                                </ElSelect>,\n                                table: () => <TableEditor propConfig={propConfig} v-model={state.editData.props[propName]} ></TableEditor>\n                            }[propConfig.type]()}\n                        </ElFormItem>\n                    }))\n                }\n\n                if (component && component.model) {\n                    //                                                 default   标签名\n                    content.push(Object.entries(component.model).map(([modelName, label]) => {\n                        return <ElFormItem label={label}>\n                            {/* model => {default:\"username\"} */}\n                            <ElInput v-model={state.editData.model[modelName]}></ElInput>\n                        </ElFormItem>\n                    }))\n                }\n\n            }\n\n\n            return <ElForm labelPosition=\"top\" style=\"padding:30px\">\n                {content}\n                <ElFormItem>\n                    <ElButton type=\"primary\" onClick={() => apply()}>应用</ElButton>\n                    <ElButton onClick={reset} >重置</ElButton>\n                </ElFormItem>\n            </ElForm>\n        }\n    }\n})","import { computed, defineComponent, inject, ref } from \"vue\";\nimport './editor.scss'\nimport EditorBlock from './editor-block'\nimport deepcopy from \"deepcopy\";\nimport { useMenuDragger } from \"./useMenuDragger\";\nimport { useFocus } from \"./useFocus\";\nimport { useBlockDragger } from \"./useBlockDragger\";\nimport { useCommand } from \"./useCommand\";\nimport { $dialog } from \"../components/Dialog\";\nimport { $dropdown, DropdownItem } from \"../components/Dropdown\";\nimport EditorOperator from \"./editor-operator\";\nimport { ElButton } from \"element-plus\";\nexport default defineComponent({\n    props: {\n        modelValue: { type: Object },\n        formData: { type: Object }\n    },\n    emits: ['update:modelValue'], // 要触发的时间\n    setup(props, ctx) {\n        // 预览的时候 内容不能在操作了 ，可以点击 输入内容 方便看效果\n        const previewRef = ref(false);\n        const editorRef = ref(true);\n\n        const data = computed({\n            get() {\n                return props.modelValue\n            },\n            set(newValue) {\n                ctx.emit('update:modelValue', deepcopy(newValue))\n            }\n        });\n        const containerStyles = computed(() => ({\n            width: data.value.container.width + 'px',\n            height: data.value.container.height + 'px'\n        }))\n\n        const config = inject('config');\n\n        const containerRef = ref(null);\n        // 1.实现菜单的拖拽功能\n        const { dragstart, dragend } = useMenuDragger(containerRef, data);\n\n        // 2.实现获取焦点 选中后可能直接就进行拖拽了\n        let { blockMousedown, focusData, containerMousedown, lastSelectBlock, clearBlockFocus } = useFocus(data, previewRef, (e) => {\n            // 获取焦点后进行拖拽\n            mousedown(e)\n        });\n        // 2.实现组件拖拽\n        let { mousedown, markLine } = useBlockDragger(focusData, lastSelectBlock, data);\n\n        const { commands } = useCommand(data, focusData); // []\n        const buttons = [//顶部菜单栏\n            { label: '撤销', icon: 'icon-back', handler: () => commands.undo() },\n            { label: '前进', icon: 'icon-forward', handler: () => commands.redo() },\n            {//导出\n                label: '导出', icon: 'icon-export', handler: () => {\n                    $dialog({//$dialog是在\"../components/Dialog\"中编写导入的\n                        title: '导出json使用',\n                        content: JSON.stringify(data.value),\n                    })\n                }\n            },\n            {//导入\n                label: '导入', icon: 'icon-import', handler: () => {\n                    $dialog({\n                        title: '导入json使用',\n                        content: '',\n                        footer: true,\n                        onConfirm(text) {\n                            //data.value = JSON.parse(text); // 这样去更改无法保留历史记录\n                            commands.updateContainer(JSON.parse(text));\n                        }\n                    })\n                }\n            },\n            { label: '置顶', icon: 'icon-place-top', handler: () => commands.placeTop() },\n            { label: '置底', icon: 'icon-place-bottom', handler: () => commands.placeBottom() },\n            { label: '删除', icon: 'icon-delete', handler: () => commands.delete() },\n            {//编辑|预览\n                label: () => previewRef.value ? '编辑' : '预览', icon: () => previewRef.value ? 'icon-edit' : 'icon-browse', handler: () => {\n                    previewRef.value = !previewRef.value;\n                    clearBlockFocus();\n                }\n            },\n            {\n                label: '关闭', icon: 'icon-close', handler: () => {\n                    editorRef.value = false;\n                    clearBlockFocus();\n                }\n            },\n        ];\n\n        const onContextMenuBlock = (e, block) => {//右键菜单栏\n            e.preventDefault();\n            $dropdown({\n                el: e.target, // 以哪个元素为准产生一个dropdown\n                content: () => {\n                    return <>\n                        <DropdownItem label=\"删除\" icon=\"icon-delete\" onClick={() => commands.delete()}></DropdownItem>\n                        <DropdownItem label=\"置顶\" icon=\"icon-place-top\" onClick={() => commands.placeTop()}></DropdownItem>\n                        <DropdownItem label=\"置底\" icon=\"icon-place-bottom\" onClick={() => commands.placeBottom()}></DropdownItem>\n                        <DropdownItem label=\"查看\" icon=\"icon-browse\" onClick={() => {\n                            $dialog({\n                                title: '查看节点数据',\n                                content: JSON.stringify(block)\n                            })\n                        }}></DropdownItem>\n                        <DropdownItem label=\"导入\" icon=\"icon-import\" onClick={() => {\n                            $dialog({\n                                title: '更新当前组件',\n                                content: '',\n                                footer: true,\n                                onConfirm(text) {\n                                    text = JSON.parse(text);\n                                    commands.updateBlock(text, block)\n                                }\n                            })\n                        }}></DropdownItem>\n                    </>\n                }\n            })\n        }\n\n\n\n        return () => !editorRef.value ? <>\n            <div\n                class=\"editor-container-canvas__content\"\n                style={containerStyles.value}\n                style=\"margin:0\"\n            >\n                {\n                    (data.value.blocks.map((block, index) => (\n                        <EditorBlock\n                            class='editor-block-preview'\n                            block={block}\n                            formData={props.formData}\n                        ></EditorBlock>\n                    )))\n                }\n            </div>\n            <div>\n                <ElButton type=\"primary\" onClick={() => editorRef.value = true}>继续编辑</ElButton>\n                {JSON.stringify(props.formData)}\n            </div>\n\n\n\n        </> : <div class=\"editor\">\n            <div class=\"editor-left\">\n                {/* 根据注册列表 渲染对应的内容  可以实现h5的拖拽*/}\n                {config.componentList.map(component => (\n                    <div\n                        class=\"editor-left-item\"\n                        draggable\n                        onDragstart={e => dragstart(e, component)}\n                        onDragend={dragend}\n                    >\n                        <span>{component.label}</span>\n                        <div>{component.preview()}</div>\n                    </div>\n                ))}\n            </div>\n            <div class=\"editor-top\">\n                {buttons.map((btn, index) => {\n                    const icon = typeof btn.icon == 'function' ? btn.icon() : btn.icon\n                    const label = typeof btn.label == 'function' ? btn.label() : btn.label\n                    return <div class=\"editor-top-button\" onClick={btn.handler}>\n                        <i class={icon}></i>\n                        <span>{label}</span>\n                    </div>\n                })}\n            </div>\n            <div class=\"editor-right\">\n                <EditorOperator\n                    block={lastSelectBlock.value}\n                    data={data.value}\n                    updateContainer={commands.updateContainer}\n                    updateBlock={commands.updateBlock}\n                ></EditorOperator>\n            </div>\n            <div class=\"editor-container\">\n                {/*  负责产生滚动条 */}\n                <div class=\"editor-container-canvas\">\n                    {/* 产生内容区域 */}\n                    <div\n                        class=\"editor-container-canvas__content\"\n                        style={containerStyles.value}\n                        ref={containerRef}\n                        onMousedown={containerMousedown}\n\n                    >\n                        {\n                            (data.value.blocks.map((block, index) => (\n                                <EditorBlock\n                                    class={block.focus ? 'editor-block-focus' : ''}\n                                    class={previewRef.value ? 'editor-block-preview' : ''}\n                                    block={block}\n                                    onMousedown={(e) => blockMousedown(e, block, index)}\n                                    onContextmenu={(e) => onContextMenuBlock(e, block)}\n                                    formData={props.formData}\n                                ></EditorBlock>\n                            )))\n                        }\n\n                        {markLine.x !== null && <div class=\"line-x\" style={{ left: markLine.x + 'px' }}></div>}\n                        {markLine.y !== null && <div class=\"line-y\" style={{ top: markLine.y + 'px' }}></div>}\n\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    }\n})","import { defineComponent,computed } from \"vue\";\nexport default defineComponent({\n    props: {\n        start: { type: Number },\n        end: { type: Number }\n    },\n    emits: ['update:start', 'update:end'],\n    setup(props, ctx) {\n        const start = computed({\n            get(){\n                return props.start\n            },\n            set(newValue){\n                ctx.emit('update:start',newValue)\n            }\n        })\n        const end = computed({\n            get(){\n                return props.end\n            },\n            set(newValue){\n                ctx.emit('update:end',newValue)\n            }\n        })\n        return ()=> {\n            return <div class=\"range\">\n                <input type=\"text\" v-model={start.value} />\n                <span>~</span>\n                <input type=\"text\" v-model={end.value} />\n            </div>\n        }\n    }\n})","// 列表区可以显示所有的物料\n// key对应的组件映射关系 \nimport { ElButton, ElInput, ElOption, ElSelect } from 'element-plus'\nimport Range from '../components/Range'\n\nfunction createEditorConfig() {\n    const componentList = [];\n    const componentMap = {}\n\n    return {\n        componentList,\n        componentMap,\n        register: (component) => {\n            componentList.push(component);\n            componentMap[component.key] = component;\n        }\n    }\n}\nexport let registerConfig = createEditorConfig();\nconst createInputProp = (label) => ({ type: 'input', label });\nconst createColorProp = (label) => ({ type: 'color', label });\nconst createSelectProp = (label, options) => ({ type: 'select', label, options })\nconst createTableProp = (label, table) => ({ type: 'table', label, table })\n\nregisterConfig.register({\n    label: '下拉框',\n    preview: () => <ElSelect modelValue=\"\"></ElSelect>,\n    render: ({ props, model }) => {\n        return <ElSelect {...model.default}>\n            {(props.options || []).map((opt, index) => {\n                return <ElOption label={opt.label} value={opt.value} key={index}></ElOption>\n            })}\n        </ElSelect>\n    },\n    key: 'select',\n    props: { // [{label:'a',value:'1'},{label:'b',value:2}]\n        options: createTableProp('下拉选项', {\n            options: [\n                { label: '显示值', field: 'label' },\n                { label: '绑定值', field: 'value' },\n            ],\n            key: 'label' // 显示给用户的值 是label值\n        })\n    },\n    model: { // {default:'username'}\n        default: '绑定字段'\n    }\n})\n\nregisterConfig.register({\n    label: '文本',\n    preview: () => '预览文本',\n    render: ({ props }) => <span style={{ color: props.color, fontSize: props.size }}>{props.text || '渲染文本'}</span>,\n    key: 'text',\n    props: {\n        text: createInputProp('文本内容'),\n        color: createColorProp('字体颜色'),\n        size: createSelectProp('字体大小', [\n            { label: '14px', value: '14px' },\n            { label: '20px', value: '20px' },\n            { label: '24px', value: '24px' },\n        ])\n\n    }\n})\nregisterConfig.register({\n    label: '按钮',\n    resize: {\n        width: true,\n        height: true\n    },\n    preview: () => <ElButton>预览按钮</ElButton>,\n    render: ({ props, size }) => <ElButton style={{ height: size.height + 'px', width: size.width + 'px' }} type={props.type} size={props.size}>{props.text || '渲染按钮'}</ElButton>,\n    key: 'button',\n    props: {\n        text: createInputProp('按钮内容'),\n        type: createSelectProp('按钮类型', [\n            { label: '基础', value: 'primary' },\n            { label: '成功', value: 'success' },\n            { label: '警告', value: 'warning' },\n            { label: '危险', value: 'danger' },\n            { label: '文本', value: 'text' },\n        ]),\n        size: createSelectProp('按钮尺寸', [\n            { label: '默认', value: '' },\n            { label: '中等', value: 'medium' },\n            { label: '小', value: 'small' },\n            { label: '极小', value: 'mini' },\n        ])\n    }\n})\nregisterConfig.register({\n    label: '输入框',\n    resize: {\n        width: true, // 更改输入框的横向大小\n    },\n    preview: () => <ElInput placeholder=\"预览输入框\"></ElInput>,\n    render: ({ model, size }) => <ElInput placeholder=\"渲染输入框\" {...model.default} style={{ width: size.width + 'px' }}></ElInput>,\n    key: 'input',\n    model: { // {default:'username'}\n        default: '绑定字段'\n    }\n});\nregisterConfig.register({\n    label: '范围选择器',\n    preview: () => <Range placeholder=\"预览输入框\"></Range>,\n    render: ({ model }) => {\n        return <Range {...{\n            start: model.start.modelValue, // @update:start\n            end: model.end.modelValue,\n            'onUpdate:start': model.start['onUpdate:modelValue'],\n            'onUpdate:end': model.end['onUpdate:modelValue']\n        }}></Range>\n    },\n    model: {\n        start: '开始范围字段',\n        end: '结束范围字段'\n    },\n    key: 'range',\n})\n\n\n// model:{// {start:'start',end:'end'}\n//     start:'开始字段',\n//     end:'结束字段'\n// }","import { render } from \"./App.vue?vue&type=template&id=b45bcdb4\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=b45bcdb4&lang=scss\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue';\n// import 'element-plus/lib/theme-chalk/index.css'\nimport 'element-plus/theme-chalk/index.css'\nimport App from './App.vue';\n\n\n\ncreateApp(App).mount('#app');\n\n\n\n\n// 1.我们先自己构造一些假数据 能实现根据位置渲染内容\n// 2.配置组件对应的映射关系  {preview:xxx,render:xxx}","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=b45bcdb4&lang=scss\""],"sourceRoot":""}